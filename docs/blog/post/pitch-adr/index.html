<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.4"/><meta data-react-helmet="true" name="description" content="Separate concerns and write more concise Controllers by following ADR pattern in your Symfony applications.
"/><meta data-react-helmet="true" property="og:site_name" content="Philipp Fritsche"/><meta data-react-helmet="true" property="og:title" content="Attune to a higher pitch"/><meta data-react-helmet="true" property="og:description" content="Separate concerns and write more concise Controllers by following ADR pattern in your Symfony applications.
"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:image" content="https://source.unsplash.com/xIoze9dH4WI/1200x630"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@ph_fritsche"/><meta data-react-helmet="true" name="twitter:site" content="@ph_fritsche"/><meta data-react-helmet="true" name="twitter:title" content="Attune to a higher pitch"/><meta data-react-helmet="true" name="twitter:description" content="Separate concerns and write more concise Controllers by following ADR pattern in your Symfony applications.
"/><meta name="theme-color" content="hsl(180, 100%, 80%)"/><style data-emotion="css 549zl8 14bhodi 1qw96cp c7dfze 3zukih 1rtnrqa 4l7b43 faujvq 11qjisw 1rcf3o0 wmsu9q 9l3uo3 15kjgm q9xt0v 4unpuk 1ecc1vw 13usz2p s35dex 9pc6v8 1k35l6a rlubtd 1ujsas3 6xugel vubbuv">.css-549zl8{padding-top:8px;padding-bottom:8px;break-inside:avoid;}.css-14bhodi{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);overflow:hidden;}.css-14bhodi>MuiCardActionArea-root,.css-14bhodi >MuiCardActionArea-root>*{padding-top:0!important;padding-bottom:0!important;margin-top:8px;margin-bottom:8px;}.css-1qw96cp{padding:16px;}.css-1qw96cp:last-child{padding-bottom:24px;}.css-c7dfze{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.57;letter-spacing:0.00714em;}.css-3zukih{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px;}.css-3zukih>:not(:first-of-type){margin-left:8px;}.css-1rtnrqa{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.8125rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:4px 5px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#1976d2;}.css-1rtnrqa::-moz-focus-inner{border-style:none;}.css-1rtnrqa.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1rtnrqa{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1rtnrqa:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.css-1rtnrqa:hover{background-color:transparent;}}.css-1rtnrqa.Mui-disabled{color:rgba(0, 0, 0, 0.26);}.css-4l7b43{display:block;-webkit-background-size:cover;background-size:cover;background-repeat:no-repeat;-webkit-background-position:center;background-position:center;width:100%;object-fit:cover;margin-bottom:-6.6000000000000005rem;max-height:400px;height:calc((100vw - 32px) * 0.5);}@media (max-width:599.95px){.css-4l7b43{height:calc((100vw - 16px) * 0.5);}}@media (max-width:-0.05px){.css-4l7b43{height:calc((100vw - 8px) * 0.5);}}.css-faujvq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px;}.css-11qjisw{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}.css-1rcf3o0{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:300;font-size:6rem;line-height:1.167;letter-spacing:-0.01562em;display:block;color:#1976d2;font-weight:normal;text-shadow:0px -2px 2px #fff,0px 2px 2px #fff,2px 2px 2px #fff,2px 0px 2px #fff,2px -2px 2px #fff,-2px 2px 2px #fff,-2px 0px 2px #fff,-2px -2px 2px #fff;}.css-wmsu9q{padding-bottom:1.5em!important;padding-top:1.5em!important;}.css-9l3uo3{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;}.css-15kjgm{margin:0;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.css-15kjgm:hover{text-decoration-color:inherit;}.css-q9xt0v{display:inline-block;padding:0px 4px;border-radius:4px;background-color:hsla(0, 0%, 0%, 7%)!important;font-family:'Inconsolata',monospace;font-weight:400;}.css-4unpuk{position:relative;}.css-4unpuk code{display:block!important;padding-top:1em!important;padding-bottom:1em!important;max-width:100%;overflow:auto;font-size:0.9em;}.css-1ecc1vw{position:absolute;top:0;right:5%;padding:0px 8px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;background:#1976d2;color:#fff;text-transform:uppercase;box-shadow:0px 1px 2px hsla(0, 0%, 0%, 50%);}.css-13usz2p{position:relative;padding:1px 0;}.css-s35dex{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;width:1.2em!important;height:1.2em!important;color:rgba(21, 101, 192, 0.5);position:absolute;bottom:0;left:0;}.css-9pc6v8{margin:.7em 0;padding:4px 1em;background-color:hsla(0, 0%, 0%, 7%);border-radius:4px;}.css-1k35l6a{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;width:1.2em!important;height:1.2em!important;color:rgba(21, 101, 192, 0.5);position:absolute;top:0;right:0;}.css-rlubtd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;}.css-rlubtd>:not(:first-of-type){margin-left:8px;}.css-1ujsas3{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 8px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#1976d2;}.css-1ujsas3::-moz-focus-inner{border-style:none;}.css-1ujsas3.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1ujsas3{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1ujsas3:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.css-1ujsas3:hover{background-color:transparent;}}.css-1ujsas3.Mui-disabled{color:rgba(0, 0, 0, 0.26);}.css-6xugel{display:inherit;margin-right:8px;margin-left:-4px;}.css-6xugel>*:nth-of-type(1){font-size:20px;}.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><title data-react-helmet="true">Attune to a higher pitch | Philipp Fritsche</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=9ad503c915d1a1d6359e10e829e7a91b" type="image/png"/><link rel="icon" href="/favicon.svg?v=9ad503c915d1a1d6359e10e829e7a91b" type="image/svg+xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9ad503c915d1a1d6359e10e829e7a91b"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9ad503c915d1a1d6359e10e829e7a91b"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9ad503c915d1a1d6359e10e829e7a91b"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9ad503c915d1a1d6359e10e829e7a91b"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9ad503c915d1a1d6359e10e829e7a91b"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9ad503c915d1a1d6359e10e829e7a91b"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9ad503c915d1a1d6359e10e829e7a91b"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9ad503c915d1a1d6359e10e829e7a91b"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><article class="MuiBox-root css-549zl8"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-14bhodi"><div class="MuiCardContent-root css-1qw96cp"><h6 class="MuiTypography-root MuiTypography-subtitle2 css-c7dfze">7/25/2021</h6></div><div class="MuiCardActions-root MuiCardActions-spacing css-3zukih"><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall css-1rtnrqa" tabindex="0" href="/blog/tag/php">#<!-- -->php</a><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall css-1rtnrqa" tabindex="0" href="/blog/tag/symfony">#<!-- -->symfony</a><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall css-1rtnrqa" tabindex="0" href="/blog/tag/pitch">#<!-- -->pitch</a></div><img class="MuiCardMedia-root MuiCardMedia-media MuiCardMedia-img css-4l7b43" src="https://source.unsplash.com/xIoze9dH4WI/400x200" srcSet="https://source.unsplash.com/xIoze9dH4WI/400x200 400w, https://source.unsplash.com/xIoze9dH4WI/600x300 600w, https://source.unsplash.com/xIoze9dH4WI/960x480 960w"/><div class="MuiCardHeader-root css-faujvq"><div class="MuiCardHeader-content css-11qjisw"><span class="MuiTypography-root MuiTypography-h1 MuiCardHeader-title css-1rcf3o0">Attune to a higher pitch</span></div></div><div class="MuiCardContent-root css-1qw96cp"><div class="MuiBox-root css-wmsu9q"><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://php.net" target="_blank">PHP</a> is great for backend development.<br/>
<!-- -->It is fast, it is reliable and it makes it easy to write clean code.
There also are tons of well-written and battle-tested libraries at <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://packagist.org" target="_blank">Packagist</a>.<br/>
<!-- -->The language and its ecosystem came a long way from just adding some content to HTML at runtime.</p><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">And <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://symfony.com" target="_blank">Symfony</a> is one of the most mature frameworks out there.
It allows easy setups for small projects and powerful integration with the tools needed in large scale applications.<br/>
<!-- -->But one thing bugged me for a while:
Symfony <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://symfony.com/legacy/doc/gentle-introduction/1_4/en/02-Exploring-Symfony-s-Code#chapter_02_the_mvc_pattern" target="_blank">follows</a> - or better <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://symfony.com/doc/current/create_framework/introduction.html#why-would-you-like-to-create-your-own-framework" target="_blank">followed</a> - some <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">Model-View-Controller pattern</a>.
A <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://symfony.com/doc/current/controller.html" target="_blank"><code class="MuiBox-root css-q9xt0v">Controller</code></a> is required to return a <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://symfony.com/doc/current/components/http_foundation.html#response" target="_blank"><code class="MuiBox-root css-q9xt0v">Response</code></a> object.<br/>
<!-- -->For example when creating an HTML page per <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://symfony.com/doc/current/templates.html#twig-templating-language" target="_blank">Twig templates</a>, the Controller is supposed to call the <code class="MuiBox-root css-q9xt0v">twig</code> service and apply the appropriate template to any data it wants to return to the client.</p><pre class="MuiBox-root css-4unpuk"><div class="MuiBox-root css-1ecc1vw">php</div><code class="prism-code language-php prism-code language-php MuiBox-root css-q9xt0v" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">namespace</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Controller</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">use</span><span class="token plain"> </span><span class="token package">Symfony</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Component</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">HttpFoundation</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">use</span><span class="token plain"> </span><span class="token package">Symfony</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Bundle</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">FrameworkBundle</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Controller</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">AbstractController</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:rgb(38, 127, 153)">MyController</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">AbstractController</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(0, 0, 255)">__invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token class-name type-declaration" style="color:rgb(38, 127, 153)">Request</span><span class="token plain"> </span><span class="token variable" style="color:rgb(9, 134, 88)">$request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// ... handle request data ...</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// ... read from / write to database or other endpoint ...</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// ... prepare response data ...</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token variable" style="color:rgb(9, 134, 88)">$this</span><span class="token operator" style="color:rgb(0, 0, 0)">-&gt;</span><span class="token function" style="color:rgb(0, 0, 255)">render</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string single-quoted-string" style="color:rgb(163, 21, 21)">&#x27;myTemplate.html.twig&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token comment" style="color:rgb(0, 128, 0)">// some data to use in the template</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span></div></code></pre><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">Often there can be invalid requests or multiple different outputs so there are multiple calls to <code class="MuiBox-root css-q9xt0v">render</code> and often enough multiple instances of data preparations.<br/>
<!-- -->This approach quickly bloats the Controller and leads to duplicate code. While there are solutions for repeated code (<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://www.php.net/manual/en/language.oop5.inheritance.php" target="_blank">Inheritance</a>, <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://www.php.net/manual/en/language.oop5.traits.php" target="_blank">Traits</a>), there is another problem with this in my opinion:<br/>
<!-- -->It mixes different concerns inside the Controller - request handling, data handling and response handling.</p><div class="MuiBox-root css-13usz2p"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-s35dex" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="FormatQuoteIcon"><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"></path></svg><blockquote class="MuiBox-root css-9pc6v8"><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">Separation of concerns is always underrated.</p></blockquote><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1k35l6a" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="FormatQuoteIcon"><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"></path></svg></div><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">With <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://packagist.org/?query=pitch%2F" target="_blank">Pitch</a> I started a collection of packages that helps to boil down the Controller code to just the data handling.  </p><h2>Symfony as ADR</h2><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">One of the lesser known facts is that Symfony does not actually require your Controller to return a <code class="MuiBox-root css-q9xt0v">Response</code> like it says in the docs.<br/>
<!-- -->If it does not, Symfony dispatches a <code class="MuiBox-root css-q9xt0v">kernel.view</code> event with the <code class="MuiBox-root css-q9xt0v">ControllerResult</code>. Then <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://symfony.com/doc/current/event_dispatcher.html#creating-an-event-subscriber" target="_blank">Event Subscribers</a> can act on this event and set a <code class="MuiBox-root css-q9xt0v">Response</code> before Symfony would throw an exception.<br/>
<!-- -->(This <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://github.com/sensiolabs/SensioFrameworkExtraBundle/blob/77d892524da1aa7770dd052f02944076bab8e1b2/src/EventListener/TemplateListener.php#L79-L120" target="_blank">is for example exploited</a> by the popular <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://packagist.org/packages/sensio/framework-extra-bundle" target="_blank">sensio/framwork-extra-bundle</a> for its <code class="MuiBox-root css-q9xt0v">@Template</code> annotation.)</p><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://packagist.org/packages/pitch/symfony-adr" target="_blank">Pitch/symfony-adr</a>, the cornerstone of Pitch package collection, allows you to easily follow <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-15kjgm" href="https://en.wikipedia.org/wiki/Action%E2%80%93domain%E2%80%93responder" target="_blank">Action-Domain-Responder pattern</a> in your Symfony application:<br/>
<!-- -->It adds a <code class="MuiBox-root css-q9xt0v">Responder</code> to the <code class="MuiBox-root css-q9xt0v">kernel.view</code> event and instead of walking through a bunch of Event Subscribers it allows you to register Response Handlers for specific types of return values.</p><pre class="MuiBox-root css-4unpuk"><div class="MuiBox-root css-1ecc1vw">php</div><code class="prism-code language-php prism-code language-php MuiBox-root css-q9xt0v" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">namespace</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Controller</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">use</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Entity</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">MyEntity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:rgb(38, 127, 153)">MyController</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(0, 0, 255)">__invoke</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// just return e.g. an entity</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">MyEntity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span></div></code></pre><pre class="MuiBox-root css-4unpuk"><div class="MuiBox-root css-1ecc1vw">php</div><code class="prism-code language-php prism-code language-php MuiBox-root css-q9xt0v" style="color:#000000;background-color:#ffffff"><div class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">namespace</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Responder</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">use</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Entity</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">MyEntity</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">use</span><span class="token plain"> </span><span class="token package">Pitch</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">AdrBundle</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Responder</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">ResponseHandlerInterface</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">use</span><span class="token plain"> </span><span class="token package">Pitch</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">AdrBundle</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">Responder</span><span class="token package punctuation" style="color:rgb(4, 81, 165)">\</span><span class="token package">ResponsePayloadEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:rgb(38, 127, 153)">MyEntityHandler</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">ResponseHandlerInterface</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(0, 0, 255)">getSupportedPayloadTypes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:rgb(0, 0, 255)">array</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token class-name static-context" style="color:rgb(38, 127, 153)">MyEntity</span><span class="token operator" style="color:rgb(0, 0, 0)">::</span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(0, 0, 255)">handleResponsePayload</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token class-name type-declaration" style="color:rgb(38, 127, 153)">ResponsePayloadEvent</span><span class="token plain"> </span><span class="token variable" style="color:rgb(9, 134, 88)">$event</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// Create the appropriate response</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// to return MyEntity to the client.</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token comment" style="color:rgb(0, 128, 0)">// E.g. convert per Twig.</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span></div></code></pre><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">It also comes with a <code class="MuiBox-root css-q9xt0v">Graceful</code> annotation/configuration that allows you to define which exceptions in your Controllers are supposed to be handled as regular response by a Response Handler.
This allows you to not create the same <code class="MuiBox-root css-q9xt0v">try..catch</code> blocks in multiple controllers.</p><h2>Outlook</h2><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">The project is still young but I&#x27;m really excited about the changes it brings to Symfony applications.</p><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">If you like what you see and/or can make use of this in one of your applications, please spread the word!
Issues and PRs to improve this are always welcome. :)</p></div></div><div class="MuiCardActions-root MuiCardActions-spacing css-rlubtd"><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium css-1ujsas3" tabindex="0" href="https://twitter.com/intent/tweet?hashtags=php%2Csymfony%2Cpitch&amp;via=ph_fritsche" target="_blank"><span class="MuiButton-startIcon MuiButton-iconSizeMedium css-6xugel"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 300.00006 244.18703"><g transform="translate(-539.17946,-568.85777)"><path id="path3611" fill-opacity="1" fill-rule="nonzero" stroke="none" d="m 633.89823,812.04479 c 112.46038,0 173.95627,-93.16765 173.95627,-173.95625 0,-2.64628 -0.0539,-5.28062 -0.1726,-7.90305 11.93799,-8.63016 22.31446,-19.39999 30.49762,-31.65984 -10.95459,4.86937 -22.74358,8.14741 -35.11071,9.62551 12.62341,-7.56929 22.31446,-19.54304 26.88583,-33.81739 -11.81284,7.00307 -24.89517,12.09297 -38.82383,14.84055 -11.15723,-11.88436 -27.04079,-19.31655 -44.62892,-19.31655 -33.76374,0 -61.14426,27.38052 -61.14426,61.13233 0,4.79784 0.5364,9.46458 1.58538,13.94057 -50.81546,-2.55686 -95.87353,-26.88582 -126.02546,-63.87991 -5.25082,9.03545 -8.27852,19.53111 -8.27852,30.73006 0,21.21186 10.79366,39.93837 27.20766,50.89296 -10.03077,-0.30992 -19.45363,-3.06348 -27.69044,-7.64676 -0.009,0.25652 -0.009,0.50661 -0.009,0.78077 0,29.60957 21.07478,54.3319 49.0513,59.93435 -5.13757,1.40062 -10.54335,2.15158 -16.12196,2.15158 -3.93364,0 -7.76596,-0.38716 -11.49099,-1.1026 7.78383,24.2932 30.35457,41.97073 57.11525,42.46543 -20.92578,16.40207 -47.28712,26.17062 -75.93712,26.17062 -4.92898,0 -9.79834,-0.28036 -14.58427,-0.84634 27.05868,17.34379 59.18936,27.46396 93.72193,27.46396"></path></g></svg></span>Share</a></div></div></article></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/post/pitch-adr";window.___webpackCompilationHash="f5ab7ce4624d1ab0e50b";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9850e8d8982e84956fa6.js"],"app":["/app-837bbef2762a5cec13b1.js"],"component---src-pages-404-js":["/component---src-pages-404-js-29c18e577f5c370ec78b.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-e8d21e538fcd12c67b94.js"],"component---src-pages-projects-tsx":["/component---src-pages-projects-tsx-7b4b9edc41d6bdc067b4.js"],"component---src-templates-blog-list-tsx":["/component---src-templates-blog-list-tsx-e28f35591ebdf54dff9c.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-0b21f51ffbd05676e107.js"]};/*]]>*/</script><script src="/polyfill-9850e8d8982e84956fa6.js" nomodule=""></script><script src="/app-837bbef2762a5cec13b1.js" async=""></script><script src="/dc6a8720040df98778fe970bf6c000a41750d3ae-92cf8cee9b79febacf6e.js" async=""></script><script src="/framework-8d129f576944f7bb0f11.js" async=""></script><script src="/webpack-runtime-7c49068b88a4dd97f4ac.js" async=""></script></body></html>